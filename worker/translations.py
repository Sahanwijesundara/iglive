# worker/translations.py
# Multi-language support for IGLiveZBot

TRANSLATIONS = {
    'en': {
        'welcome': 'ðŸŽ‰ *Welcome to IGLiveZBot!*',
        'welcome_back': 'Welcome back! ðŸ‘‹',
        'starter_bonus': 'ðŸŽ *Starter Bonus:* +10 Points',
        'referral_bonus': 'ðŸ”— *Referral Bonus:* Applied',
        'good_morning': 'ðŸŒ… *Good Morning!*',
        'daily_reset': 'Your daily points have been refreshed!',
        'daily_bonus': 'ðŸ’Ž *Daily Bonus:* +10 Points',
        'bot_title': 'â­ï¸ *IGLiveZBot* â­ï¸',
        'track_ig_live': 'ðŸ”´ *Track Instagram Live Streams*',
        'track_ig_desc': 'See who\'s live in real-time',
        'smart_points': 'ðŸ’Ž *Smart Points System*',
        'smart_points_desc': 'Get 10 free points daily',
        'refer_earn': 'ðŸŽ *Refer & Earn*',
        'refer_earn_desc': '10 bonus points per referral',
        'choose_option': 'Choose an option below to continue:',
        'check_live': 'ðŸ”´ Check Live',
        'my_account': 'ðŸ‘¤ My Account',
        'referrals': 'ðŸŽ Referrals',
        'help': 'â„¹ï¸ Help',
        'back_to_menu': 'â¬…ï¸ Back to Menu',
    },
    'ru': {
        'welcome': 'ðŸŽ‰ *Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² IGLiveZBot!*',
        'welcome_back': 'Ð¡ Ð²Ð¾Ð·Ð²Ñ€Ð°Ñ‰ÐµÐ½Ð¸ÐµÐ¼! ðŸ‘‹',
        'starter_bonus': 'ðŸŽ *Ð¡Ñ‚Ð°Ñ€Ñ‚Ð¾Ð²Ñ‹Ð¹ Ð±Ð¾Ð½ÑƒÑ:* +10 Ð¾Ñ‡ÐºÐ¾Ð²',
        'referral_bonus': 'ðŸ”— *Ð ÐµÑ„ÐµÑ€Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð±Ð¾Ð½ÑƒÑ:* ÐŸÑ€Ð¸Ð¼ÐµÐ½Ñ‘Ð½',
        'good_morning': 'ðŸŒ… *Ð”Ð¾Ð±Ñ€Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾!*',
        'daily_reset': 'Ð’Ð°ÑˆÐ¸ ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ðµ Ð¾Ñ‡ÐºÐ¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹!',
        'daily_bonus': 'ðŸ’Ž *Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ð¹ Ð±Ð¾Ð½ÑƒÑ:* +10 Ð¾Ñ‡ÐºÐ¾Ð²',
        'bot_title': 'â­ï¸ *IGLiveZBot* â­ï¸',
        'track_ig_live': 'ðŸ”´ *ÐžÑ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð¹Ñ‚Ðµ Instagram Live*',
        'track_ig_desc': 'Ð¡Ð¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ ÐºÑ‚Ð¾ Ð² ÑÑ„Ð¸Ñ€Ðµ Ð² Ñ€ÐµÐ¶Ð¸Ð¼Ðµ Ñ€ÐµÐ°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸',
        'smart_points': 'ðŸ’Ž *Ð£Ð¼Ð½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð¾Ñ‡ÐºÐ¾Ð²*',
        'smart_points_desc': 'ÐŸÐ¾Ð»ÑƒÑ‡Ð°Ð¹Ñ‚Ðµ 10 Ð±ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ñ‹Ñ… Ð¾Ñ‡ÐºÐ¾Ð² ÐµÐ¶ÐµÐ´Ð½ÐµÐ²Ð½Ð¾',
        'refer_earn': 'ðŸŽ *ÐŸÑ€Ð¸Ð³Ð»Ð°ÑˆÐ°Ð¹Ñ‚Ðµ Ð¸ Ð·Ð°Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°Ð¹Ñ‚Ðµ*',
        'refer_earn_desc': '10 Ð±Ð¾Ð½ÑƒÑÐ½Ñ‹Ñ… Ð¾Ñ‡ÐºÐ¾Ð² Ð·Ð° Ñ€ÐµÑ„ÐµÑ€Ð°Ð»Ð°',
        'choose_option': 'Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¾Ð¿Ñ†Ð¸ÑŽ Ð½Ð¸Ð¶Ðµ:',
        'check_live': 'ðŸ”´ ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ñ‚Ñ€Ð°Ð½ÑÐ»ÑÑ†Ð¸Ð¸',
        'my_account': 'ðŸ‘¤ ÐœÐ¾Ð¹ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚',
        'referrals': 'ðŸŽ Ð ÐµÑ„ÐµÑ€Ð°Ð»Ñ‹',
        'help': 'â„¹ï¸ ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ',
        'back_to_menu': 'â¬…ï¸ ÐÐ°Ð·Ð°Ð´ Ð² Ð¼ÐµÐ½ÑŽ',
    },
    'es': {
        'welcome': 'ðŸŽ‰ *Â¡Bienvenido a IGLiveZBot!*',
        'welcome_back': 'Â¡Bienvenido de nuevo! ðŸ‘‹',
        'starter_bonus': 'ðŸŽ *Bono inicial:* +10 Puntos',
        'referral_bonus': 'ðŸ”— *Bono por referido:* Aplicado',
        'good_morning': 'ðŸŒ… *Â¡Buenos dÃ­as!*',
        'daily_reset': 'Â¡Tus puntos diarios se han actualizado!',
        'daily_bonus': 'ðŸ’Ž *Bono diario:* +10 Puntos',
        'bot_title': 'â­ï¸ *IGLiveZBot* â­ï¸',
        'track_ig_live': 'ðŸ”´ *Rastrea Lives de Instagram*',
        'track_ig_desc': 'Ve quiÃ©n estÃ¡ en vivo en tiempo real',
        'smart_points': 'ðŸ’Ž *Sistema inteligente de puntos*',
        'smart_points_desc': 'ObtÃ©n 10 puntos gratis diarios',
        'refer_earn': 'ðŸŽ *Refiere y gana*',
        'refer_earn_desc': '10 puntos extra por referido',
        'choose_option': 'Elige una opciÃ³n a continuaciÃ³n:',
        'check_live': 'ðŸ”´ Ver en vivo',
        'my_account': 'ðŸ‘¤ Mi cuenta',
        'referrals': 'ðŸŽ Referidos',
        'help': 'â„¹ï¸ Ayuda',
        'back_to_menu': 'â¬…ï¸ Volver al menÃº',
    },
    'pt': {
        'welcome': 'ðŸŽ‰ *Bem-vindo ao IGLiveZBot!*',
        'welcome_back': 'Bem-vindo de volta! ðŸ‘‹',
        'starter_bonus': 'ðŸŽ *BÃ´nus inicial:* +10 Pontos',
        'referral_bonus': 'ðŸ”— *BÃ´nus de indicaÃ§Ã£o:* Aplicado',
        'good_morning': 'ðŸŒ… *Bom dia!*',
        'daily_reset': 'Seus pontos diÃ¡rios foram atualizados!',
        'daily_bonus': 'ðŸ’Ž *BÃ´nus diÃ¡rio:* +10 Pontos',
        'bot_title': 'â­ï¸ *IGLiveZBot* â­ï¸',
        'track_ig_live': 'ðŸ”´ *Rastreie Lives do Instagram*',
        'track_ig_desc': 'Veja quem estÃ¡ ao vivo em tempo real',
        'smart_points': 'ðŸ’Ž *Sistema inteligente de pontos*',
        'smart_points_desc': 'Ganhe 10 pontos grÃ¡tis diariamente',
        'refer_earn': 'ðŸŽ *Indique e ganhe*',
        'refer_earn_desc': '10 pontos extras por indicaÃ§Ã£o',
        'choose_option': 'Escolha uma opÃ§Ã£o abaixo:',
        'check_live': 'ðŸ”´ Ver ao vivo',
        'my_account': 'ðŸ‘¤ Minha conta',
        'referrals': 'ðŸŽ IndicaÃ§Ãµes',
        'help': 'â„¹ï¸ Ajuda',
        'back_to_menu': 'â¬…ï¸ Voltar ao menu',
    },
    'ar': {
        'welcome': 'ðŸŽ‰ *Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ IGLiveZBot!*',
        'welcome_back': 'Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ! ðŸ‘‹',
        'starter_bonus': 'ðŸŽ *Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©:* +10 Ù†Ù‚Ø§Ø·',
        'referral_bonus': 'ðŸ”— *Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„Ø¥Ø­Ø§Ù„Ø©:* Ù…Ø·Ø¨Ù‚Ø©',
        'good_morning': 'ðŸŒ… *ØµØ¨Ø§Ø­ Ø§Ù„Ø®ÙŠØ±!*',
        'daily_reset': 'ØªÙ… ØªØ­Ø¯ÙŠØ« Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„ÙŠÙˆÙ…ÙŠØ©!',
        'daily_bonus': 'ðŸ’Ž *Ø§Ù„Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©:* +10 Ù†Ù‚Ø§Ø·',
        'bot_title': 'â­ï¸ *IGLiveZBot* â­ï¸',
        'track_ig_live': 'ðŸ”´ *ØªØªØ¨Ø¹ Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¹Ù„Ù‰ Instagram*',
        'track_ig_desc': 'Ø´Ø§Ù‡Ø¯ Ù…Ù† ÙŠØ¨Ø« Ù…Ø¨Ø§Ø´Ø±Ø© Ø§Ù„Ø¢Ù†',
        'smart_points': 'ðŸ’Ž *Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø°ÙƒÙŠ*',
        'smart_points_desc': 'Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ 10 Ù†Ù‚Ø§Ø· Ù…Ø¬Ø§Ù†ÙŠØ© ÙŠÙˆÙ…ÙŠØ§Ù‹',
        'refer_earn': 'ðŸŽ *Ù‚Ù… Ø¨Ø§Ù„Ø¥Ø­Ø§Ù„Ø© ÙˆØ§ÙƒØ³Ø¨*',
        'refer_earn_desc': '10 Ù†Ù‚Ø§Ø· Ø¥Ø¶Ø§ÙÙŠØ© Ù„ÙƒÙ„ Ø¥Ø­Ø§Ù„Ø©',
        'choose_option': 'Ø§Ø®ØªØ± Ø®ÙŠØ§Ø±Ø§Ù‹ Ø£Ø¯Ù†Ø§Ù‡:',
        'check_live': 'ðŸ”´ ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±',
        'my_account': 'ðŸ‘¤ Ø­Ø³Ø§Ø¨ÙŠ',
        'referrals': 'ðŸŽ Ø§Ù„Ø¥Ø­Ø§Ù„Ø§Øª',
        'help': 'â„¹ï¸ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©',
        'back_to_menu': 'â¬…ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©',
    },
    'it': {
        'welcome': 'ðŸŽ‰ *Benvenuto in IGLiveZBot!*',
        'welcome_back': 'Bentornato! ðŸ‘‹',
        'starter_bonus': 'ðŸŽ *Bonus iniziale:* +10 Punti',
        'referral_bonus': 'ðŸ”— *Bonus referral:* Applicato',
        'good_morning': 'ðŸŒ… *Buongiorno!*',
        'daily_reset': 'I tuoi punti giornalieri sono stati aggiornati!',
        'daily_bonus': 'ðŸ’Ž *Bonus giornaliero:* +10 Punti',
        'bot_title': 'â­ï¸ *IGLiveZBot* â­ï¸',
        'track_ig_live': 'ðŸ”´ *Traccia Live di Instagram*',
        'track_ig_desc': 'Vedi chi Ã¨ in diretta in tempo reale',
        'smart_points': 'ðŸ’Ž *Sistema punti intelligente*',
        'smart_points_desc': 'Ottieni 10 punti gratis al giorno',
        'refer_earn': 'ðŸŽ *Invita e guadagna*',
        'refer_earn_desc': '10 punti bonus per referral',
        'choose_option': 'Scegli un\'opzione qui sotto:',
        'check_live': 'ðŸ”´ Verifica Live',
        'my_account': 'ðŸ‘¤ Il mio account',
        'referrals': 'ðŸŽ Referral',
        'help': 'â„¹ï¸ Aiuto',
        'back_to_menu': 'â¬…ï¸ Torna al menu',
    },
    'fr': {
        'welcome': 'ðŸŽ‰ *Bienvenue sur IGLiveZBot!*',
        'welcome_back': 'Bon retour! ðŸ‘‹',
        'starter_bonus': 'ðŸŽ *Bonus de dÃ©part:* +10 Points',
        'referral_bonus': 'ðŸ”— *Bonus de parrainage:* AppliquÃ©',
        'good_morning': 'ðŸŒ… *Bonjour!*',
        'daily_reset': 'Vos points quotidiens ont Ã©tÃ© actualisÃ©s!',
        'daily_bonus': 'ðŸ’Ž *Bonus quotidien:* +10 Points',
        'bot_title': 'â­ï¸ *IGLiveZBot* â­ï¸',
        'track_ig_live': 'ðŸ”´ *Suivez les Lives Instagram*',
        'track_ig_desc': 'Voyez qui est en direct en temps rÃ©el',
        'smart_points': 'ðŸ’Ž *SystÃ¨me de points intelligent*',
        'smart_points_desc': 'Obtenez 10 points gratuits par jour',
        'refer_earn': 'ðŸŽ *Parrainez et gagnez*',
        'refer_earn_desc': '10 points bonus par parrainage',
        'choose_option': 'Choisissez une option ci-dessous:',
        'check_live': 'ðŸ”´ VÃ©rifier les Lives',
        'my_account': 'ðŸ‘¤ Mon compte',
        'referrals': 'ðŸŽ Parrainages',
        'help': 'â„¹ï¸ Aide',
        'back_to_menu': 'â¬…ï¸ Retour au menu',
    },
    'de': {
        'welcome': 'ðŸŽ‰ *Willkommen bei IGLiveZBot!*',
        'welcome_back': 'Willkommen zurÃ¼ck! ðŸ‘‹',
        'starter_bonus': 'ðŸŽ *Startbonus:* +10 Punkte',
        'referral_bonus': 'ðŸ”— *Empfehlungsbonus:* Angewendet',
        'good_morning': 'ðŸŒ… *Guten Morgen!*',
        'daily_reset': 'Deine tÃ¤glichen Punkte wurden aktualisiert!',
        'daily_bonus': 'ðŸ’Ž *TÃ¤glicher Bonus:* +10 Punkte',
        'bot_title': 'â­ï¸ *IGLiveZBot* â­ï¸',
        'track_ig_live': 'ðŸ”´ *Verfolge Instagram Lives*',
        'track_ig_desc': 'Sieh in Echtzeit, wer live ist',
        'smart_points': 'ðŸ’Ž *Intelligentes Punktesystem*',
        'smart_points_desc': 'Erhalte tÃ¤glich 10 kostenlose Punkte',
        'refer_earn': 'ðŸŽ *Empfehle und verdiene*',
        'refer_earn_desc': '10 Bonuspunkte pro Empfehlung',
        'choose_option': 'WÃ¤hle unten eine Option:',
        'check_live': 'ðŸ”´ Live prÃ¼fen',
        'my_account': 'ðŸ‘¤ Mein Konto',
        'referrals': 'ðŸŽ Empfehlungen',
        'help': 'â„¹ï¸ Hilfe',
        'back_to_menu': 'â¬…ï¸ ZurÃ¼ck zum MenÃ¼',
    },
}

# Language names for selection menu
LANGUAGE_NAMES = {
    'en': 'ðŸ‡¬ðŸ‡§ English',
    'ru': 'ðŸ‡·ðŸ‡º Ð ÑƒÑÑÐºÐ¸Ð¹',
    'es': 'ðŸ‡ªðŸ‡¸ EspaÃ±ol',
    'pt': 'ðŸ‡µðŸ‡¹ PortuguÃªs',
    'ar': 'ðŸ‡¸ðŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
    'it': 'ðŸ‡®ðŸ‡¹ Italiano',
    'fr': 'ðŸ‡«ðŸ‡· FranÃ§ais',
    'de': 'ðŸ‡©ðŸ‡ª Deutsch',
}

# Map Telegram language codes to our supported languages
TELEGRAM_LANG_MAP = {
    'en': 'en',
    'ru': 'ru',
    'es': 'es',
    'pt': 'pt',
    'ar': 'ar',
    'it': 'it',
    'fr': 'fr',
    'de': 'de',
    # Fallback for similar languages
    'pt-br': 'pt',
    'pt-pt': 'pt',
    'es-mx': 'es',
    'es-es': 'es',
    'ar-sa': 'ar',
    'ar-ae': 'ar',
}


def get_text(key: str, lang: str = 'en', **kwargs) -> str:
    """
    Get translated text for a given key and language.
    
    Args:
        key: Translation key
        lang: Language code (defaults to 'en')
        **kwargs: Format parameters for string formatting
        
    Returns:
        Translated string, falls back to English if not found
    """
    # Fallback to English if language not supported
    if lang not in TRANSLATIONS:
        lang = 'en'
    
    # Get translation, fallback to English if key not found
    text = TRANSLATIONS.get(lang, {}).get(key, TRANSLATIONS['en'].get(key, key))
    
    # Apply formatting if parameters provided
    if kwargs:
        try:
            text = text.format(**kwargs)
        except (KeyError, ValueError):
            pass  # Return unformatted if parameters don't match
    
    return text


def detect_language(telegram_language_code: str) -> str:
    """
    Detect user's preferred language from Telegram language code.
    
    Args:
        telegram_language_code: Language code from Telegram user object
        
    Returns:
        Supported language code, defaults to 'en'
    """
    if not telegram_language_code:
        return 'en'
    
    # Normalize to lowercase
    lang_code = telegram_language_code.lower()
    
    # Try exact match
    if lang_code in TELEGRAM_LANG_MAP:
        return TELEGRAM_LANG_MAP[lang_code]
    
    # Try language prefix (e.g., 'en-US' -> 'en')
    lang_prefix = lang_code.split('-')[0] if '-' in lang_code else lang_code
    if lang_prefix in TELEGRAM_LANG_MAP:
        return TELEGRAM_LANG_MAP[lang_prefix]
    
    # Default to English
    return 'en'
